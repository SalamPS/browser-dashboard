(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[927],{6282:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/Todo",function(){return a(1986)}])},1986:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return d}});var n=a(5893),i=a(7294),s=a(9198),l=a.n(s);a(3509),a(1955);let c=e=>{let{config:t,markClear:a}=e,i=e=>e>259200?"safe":e>86400?"hint":"warn",s=e=>(e=new Date(1e3*e)).toLocaleString("en-GB",{day:"2-digit",month:"2-digit",year:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"});return(0,n.jsx)(n.Fragment,{children:t.todo.map((e,l)=>{console.log(t);let c=i(new Date().getTime()-e.dead);return 2==e.clear?(0,n.jsx)("div",{className:"clear2"},l):(0,n.jsxs)("div",{className:"list".concat(0!=e.clear?" clear".concat(e.clear):""),children:[(0,n.jsx)("div",{className:"mark ".concat(c)}),(0,n.jsxs)("div",{className:"info",children:[(0,n.jsx)("h2",{children:e.title}),(0,n.jsx)("p",{children:s(e.dead)})]}),(0,n.jsx)("div",{className:"edit",children:(0,n.jsx)("div",{className:"bi bi-check".concat(e.clear?"-circle-fill":""),onClick:()=>{a(l)}})})]},l)})})},r=e=>{let{config:t,setConfig:a,setAdd:s}=e,[c,r]=(0,i.useState)({title:"",desc:"",dead:"",important:!1,made:new Date().getTime(),index:0,clear:0}),d=(e,t)=>{r(a=>({...a,[e]:t}))};return(0,n.jsxs)("form",{onSubmit:e=>{e.preventDefault(),t.todo.push(c),a(t),s(!1)},children:[(0,n.jsxs)("label",{children:[(0,n.jsx)("span",{children:"Title"}),(0,n.jsx)("input",{type:"text",name:"title",value:c.title,onChange:e=>d(e.target.name,e.target.value)})]}),(0,n.jsxs)("label",{children:[(0,n.jsx)("span",{children:"Description"}),(0,n.jsx)("input",{type:"text",name:"desc",value:c.desc,onChange:e=>d(e.target.name,e.target.value)})]}),(0,n.jsxs)("label",{children:[(0,n.jsx)("span",{children:"Deadline"}),(0,n.jsx)(l(),{selected:c.dead,onChange:e=>d("dead",e),showTimeSelect:!0,timeIntervals:1,dateFormat:"yyyy-MM-dd HH:mm:ss"})]}),(0,n.jsxs)("label",{children:[(0,n.jsx)("span",{children:"Important"}),(0,n.jsx)("input",{type:"checkbox",name:"important",checked:c.important,onChange:e=>{d(e.target.name,e.target.checked)}})]}),(0,n.jsx)("button",{id:"submit",type:"submit",title:"Save new List",children:"Submit"}),(0,n.jsx)("button",{id:"cancel",title:"Cancel",onClick:()=>{s(!1)},children:"Cancel"})]})};function d(){let e=e=>new Promise(t=>setTimeout(t,e)),t="userConfig",[a,s]=(0,i.useState)({todo:[],widget:[]});(0,i.useEffect)(()=>{let e=localStorage.getItem(t);e&&s(JSON.parse(e)),(async()=>{try{let e=await fetch("api/default");if(e.ok){let t=await e.json();s(e=>({...e,todo:t}))}else console.error("Failed to fetch default data")}catch(e){console.error("Error:",e)}})()},[]),(0,i.useEffect)(()=>{localStorage.setItem(t,JSON.stringify(a))},[a]);let l=async t=>{let n=e=>{let n={...a};n.todo[t].clear=e,s(n)};n(1),await e(200),n(2)},[d,o]=(0,i.useState)(!1);return(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)("div",{className:"todo",children:[(0,n.jsx)("h1",{children:"ToDo"}),(0,n.jsxs)("div",{className:"todolist",children:[(0,n.jsx)(c,{config:a,markClear:l}),d?(0,n.jsx)("div",{className:"list form",children:(0,n.jsx)(r,{config:{...a},setConfig:s,setAdd:o})}):(0,n.jsx)("div",{className:"list add",onClick:()=>{o(!0)},children:"+"})]})]})})}}},function(e){e.O(0,[883,888,774,179],function(){return e(e.s=6282)}),_N_E=e.O()}]);